
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>taxize from ropensci</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="taxize -- taxonomy in R">
    <meta name="author" content="Scott Chamberlain">
    <script src="http://use.edgefonts.net/source-code-pro.js"></script>
    <script src="http://use.edgefonts.net/quattrocento-sans.js"></script>
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles/github.css">
    <script src="assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    </head>

  <body>

  <div class="span11 offset1">
  <div class="row">
  <br><br>
   <h1>taxize, v0.0.3</h1>
  </div>

  <br><br>
  <div>
   <a href="https://github.com/ropensci/taxize_/" style="color:#ffffff"> <button class="btn btn-success btn-large" style="display: block; width: 100%;"><i class="icon-white icon-download"></i>Download from GitHub</button></a>
</div>

  <hr class="soften">
  </div>

  <div class="row">
 <div class="span3">
        <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav">
          <li><a href="#about"><i class="icon-chevron-right"></i> About</a></li>
          <li><a href="#installation"><i class="icon-chevron-right"></i> Installation</a></li>
          <li><a href="#phylomatic"><i class="icon-chevron-right"></i> Phylomatic - get a phylogeny of plant species</a></li>
          <li><a href="#itis"><i class="icon-chevron-right"></i> Integrated Taxonomic Informaiton Service (ITIS)</a></li>
          <li><a href="#ncbi"><i class="icon-chevron-right"></i> NCBI Taxonomy Browser</a></li>
          <li><a href="#gnr"><i class="icon-chevron-right"></i> Global Names Resolver (GNR)</a></li>
          <li><a href="#tropicos"><i class="icon-chevron-right"></i> Tropicos</a></li>
          <li><a href="#ubio"><i class="icon-chevron-right"></i> Search uBio</a></li>
          <li><a href="#iucn"><i class="icon-chevron-right"></i> IUCN Red List</a></li>
          <li><a href="#support"><i class="icon-chevron-right"></i> Support and Bugs</a></li>
          <li><a href="#license"><i class="icon-chevron-right"></i> License</a></li>
          <br><br>
          <!-- <li><a href="functions.html"><i class="icon-chevron-right"></i> Function index</a></li> -->
          <li><a href="functions.html"  style="color:#0000ff"><button class="btn btn-info btn" style="display: block; width: 70%;"><i class="icon-white icon-th-list"></i>Function index</button></a></li>
     </ul>
      </div>
 </div>

 <div class="span8">
  <section id="about">

 <h2>About the package</h2>
  We are developing taxize as a package to allow users to search over many websites for species names (scientific and common) and download up and downstream taxonomic hierarchical information - and many other things. 
  <br><br>
  The functions in the package that hit a specific API have a prefix and suffix separated by an underscore. They follow the format of service_whatitdoes. For example, gnr_resolve uses the Global Names Resolver API to resolve species names. General functions in the package that don't hit a specific API don't have two words separated by an underscore, e.g., classification.
  <br><br>
  You need API keys for Encyclopedia of Life (EOL), the Universal Biological Indexer and Organizer (uBio), Tropicos, and Plantminer.
  <br><br>
  </section>

  <br><br><br>


   <section id="installation">
 <h2>Installing taxize</h2>
A stable version is now available on <a href="http://cran.r-project.org/web/packages/taxize_/">CRAN</a>. <br>
   <pre><code lang="r"># Stable version from CRAN
install.packages('taxize')
library(taxize)</code></pre>


<pre><code lang="r">
# or install the development version from our GitHub repo.
install.packages('devtools')
library(devtools)
install_github('taxize_', 'ropensci')
library(taxize)</code></pre>

  </section>

  <br><br><br>

    <section id="phylomatic">
   <h2>Phylomatic - get a phylogeny of plant species</h2>
<pre><code lang="r">> # input the taxonomic names
> taxa <- c("Poa annua", "Abies procera", "Helianthus annuus")
> 
> # fetch the tree - the formatting of names and higher taxonmy is done within the function
> tree <- phylomatic_tree(taxa=taxa, get = 'POST', informat='newick', method = "phylomatic", 
+     storedtree = "R20120829", taxaformat = "slashpath", outformat = "newick", clean = "true")

Retrieving data for species ' Poa annua '

Retrieving data for species ' Abies procera '

Retrieving data for species ' Helianthus annuus '
http://www.itis.gov/ITISWebService/services/ITISService/getFullHierarchyFromTSN?tsn=41107
http://www.itis.gov/ITISWebService/services/ITISService/getFullHierarchyFromTSN?tsn=181835
http://www.itis.gov/ITISWebService/services/ITISService/getFullHierarchyFromTSN?tsn=36616
> 
> # plot the tree
> plot(tree)</code></pre>
  <br><br>
  <img src="phylomatic_phylo.png" class="img-polaroid">
  <br><br>

  </section>

  <br><br><br>

   <section id="itis">
   <h2>Integrated Taxonomic Information Service (ITIS)</h2>
   
   <h3>Search by term and search type (Note: TSN stands for Taxonomic Serial Number)</h3>
  <pre><code lang="r">> itis(203539, c("getsynonymnamesfromtsn","getacceptednamesfromtsn"))
http://www.itis.gov/ITISWebService/services/ITISService/getSynonymNamesFromTSN?tsn=203539
$getsynonymnamesfromtsn
$getsynonymnamesfromtsn$`203539`
     name    tsn
1 nomatch 203539

$getacceptednamesfromtsn
$getacceptednamesfromtsn$`203539`
$getacceptednamesfromtsn$`203539`$submittedTsn
[1] "203539"

$getacceptednamesfromtsn$`203539`$acceptedName
[1] "Ursus americanus luteolus"

$getacceptednamesfromtsn$`203539`$acceptedTsn
[1] "202388"</code></pre>

  <h3>Show higher taxonomy for a given TSN</h3>
<pre><code lang="r">> classification(685566, ID = "tsn")
http://www.itis.gov/ITISWebService/services/ITISService/getFullHierarchyFromTSN?tsn=685566
[[1]]
      parentName parentTsn  rankName        taxonName    tsn
1                            Kingdom         Animalia 202423
2       Animalia    202423    Phylum         Chordata 158852
3       Chordata    158852 Subphylum       Vertebrata 331030
4     Vertebrata    331030     Class         Amphibia 173420
5       Amphibia    173420     Order          Caudata 173584
6        Caudata    173584    Family   Plethodontidae 173631
7 Plethodontidae    173631 Subfamily   Plethodontinae 550197
8 Plethodontinae    550197     Genus        Plethodon 173648
9      Plethodon    173648   Species Plethodon asupak 685566</code></pre>

<h3>Get a TSN from a species name</h3>
<pre><code lang="r">> tsn <- get_tsn(searchterm = "Quercus_douglasii", searchtype = "sciname")

Retrieving data for species ' Quercus_douglasii '

# use classification with get_tsn together:
> classification(tsn)
http://www.itis.gov/ITISWebService/services/ITISService/getFullHierarchyFromTSN?tsn=19322
$`1`
        parentName parentTsn      rankName         taxonName    tsn
1                                  Kingdom           Plantae 202422
2          Plantae    202422    Subkingdom    Viridaeplantae 846492
3   Viridaeplantae    846492  Infrakingdom      Streptophyta 846494
4     Streptophyta    846494      Division      Tracheophyta 846496
5     Tracheophyta    846496   Subdivision   Spermatophytina 846504
6  Spermatophytina    846504 Infradivision      Angiospermae 846505
7     Angiospermae    846505         Class     Magnoliopsida  18063
8    Magnoliopsida     18063    Superorder           Rosanae 846548
9          Rosanae    846548         Order           Fagales  19273
10         Fagales     19273        Family          Fagaceae  19275
11        Fagaceae     19275         Genus           Quercus  19276
12         Quercus     19276       Species Quercus douglasii  19322</code></pre>
  
  </section>

  <br><br><br>


    <section id="ncbi">
     <h2>NCBI Taxonomy Browser</h2>

<pre><code lang="r">
> ## Get Unique Identifier
> uids <- get_uid(c("Chironomus riparius", "Chaetopteryx"))

Retrieving data for species ' Chironomus riparius '

Retrieving data for species ' Chaetopteryx '
> ## And retrieve classification
> classification(uids)
[[1]]
              ScientificName         Rank     UID
1         cellular organisms      no rank  131567
2                  Eukaryota superkingdom    2759
3               Opisthokonta      no rank   33154
4                    Metazoa      kingdom   33208
5                  Eumetazoa      no rank    6072
6                  Bilateria      no rank   33213
7                Protostomia      no rank   33317
8                  Ecdysozoa      no rank 1206794
9              Panarthropoda      no rank   88770
10                Arthropoda       phylum    6656
11               Mandibulata      no rank  197563
12              Pancrustacea      no rank  197562
13                  Hexapoda   superclass    6960
14                   Insecta        class   50557
15                Dicondylia      no rank   85512
16                 Pterygota      no rank    7496
17                  Neoptera     subclass   33340
18             Endopterygota   infraclass   33392
19                   Diptera        order    7147
20                Nematocera     suborder    7148
21              Culicimorpha   infraorder   43786
22             Chironomoidea  superfamily   41828
23              Chironomidae       family    7149
24              Chironominae    subfamily   54970
25               Chironomini        tribe   72530
26                Chironomus        genus    7150
27 Chironomus incertae sedis      no rank 1165752
28       Chironomus riparius      species  315576

[[2]]
       ScientificName         Rank     UID
1  cellular organisms      no rank  131567
2           Eukaryota superkingdom    2759
3        Opisthokonta      no rank   33154
4             Metazoa      kingdom   33208
5           Eumetazoa      no rank    6072
6           Bilateria      no rank   33213
7         Protostomia      no rank   33317
8           Ecdysozoa      no rank 1206794
9       Panarthropoda      no rank   88770
10         Arthropoda       phylum    6656
11        Mandibulata      no rank  197563
12       Pancrustacea      no rank  197562
13           Hexapoda   superclass    6960
14            Insecta        class   50557
15         Dicondylia      no rank   85512
16          Pterygota      no rank    7496
17           Neoptera     subclass   33340
18      Endopterygota   infraclass   33392
19   Amphiesmenoptera   superorder   85604
20        Trichoptera        order   30263
21      Integripalpia     suborder   93875
22     Limnephiloidea  superfamily   41033
23      Limnephilidae       family   50645
24      Limnephilinae    subfamily  177669
25    Chaetopterygini        tribe  492564
26       Chaetopteryx        genus  492549

</code></pre>
  </section>

  <br><br><br>

    <section id="gnr">

 <h2>Global Names Resolver (GNR)</h2>

 <h3>Get just id's and names of sources in a data.frame</h3>
<pre><code lang="r">
> tail(gnr_datasources(todf = T))
    id                                title
82 164                            BioLib.cz
83 165 Tropicos - Missouri Botanical Garden
84 166                                nlbif
85 167  The International Plant Names Index
86 168              Index to Organism Names
87 169                        uBio NameBank</code></pre>

<h3>Give me the id for EOL (Encyclopedia of Life)</h3>
<pre><code lang="r">
> out <- gnr_datasources(todf = T)
> out[out$title == "EOL", "id"]
[1] 12
> ## Fuzzy search for sources with the word "zoo"
> out <- gnr_datasources(todf = T)
> outdf <- out[agrep("zoo", out$title, ignore.case = T), ]
> outdf[1:2, ]
    id             title
20 100 Mushroom Observer
25 105           ZooKeys</code></pre>

<h3>Resolve some names</h3>
<pre><code lang="r">
> ### Search for _Helianthus annuus_ and _Homo sapiens_, return a data.frame
> gnr_resolve(names = c("Helianthus annuus", "Homo sapiens"), returndf = TRUE)[1:2, ]
  data_source_id    submitted_name       name_string score    title
1              4 Helianthus annuus Helianthus annuus 0.988     NCBI
3             10 Helianthus annuus Helianthus annuus 0.988 Freebase
> ### Search for the same species, with only using data source 12 (i.e., EOL)
> gnr_resolve(names = c("Helianthus annuus", "Homo sapiens"), data_source_ids = "12", returndf = TRUE)
  data_source_id    submitted_name       name_string score title
1             12 Helianthus annuus Helianthus annuus 0.988   EOL
2             12      Homo sapiens      Homo sapiens 0.988   EOL</code></pre>
 
  </section>

  <br><br><br>

  
<section id="tropicos">
<h2>Tropicos</h2>
<h3>Get accepted names</h3>
<pre><code lang="r">> head(tp_acceptednames(id = 25503923))
http://services.tropicos.org/Name/25503923/AcceptedNames?apikey=f3e499d4-1519-42c9-afd1-685a16882f5a&format=json
                   variable             value category
1                    NameId          25503923  Synonym
2            ScientificName       Aira pumila  Synonym
3 ScientificNameWithAuthors Aira pumila Pursh  Synonym
4                    Family           Poaceae  Synonym
5                    NameId          25509881 Accepted
6            ScientificName         Poa annua Accepted</code></pre>

<h3>Get synonyms</h3>
<pre><code lang="r">> head(tp_synonyms(id = 25509881))
http://services.tropicos.org/Name/25509881/Synonyms?apikey=f3e499d4-1519-42c9-afd1-685a16882f5a&format=json
                   variable             value category
1                    NameId          25503923  Synonym
2            ScientificName       Aira pumila  Synonym
3 ScientificNameWithAuthors Aira pumila Pursh  Synonym
4                    Family           Poaceae  Synonym
5                    NameId          25509881 Accepted
6            ScientificName         Poa annua Accepted</code></pre>
</section>

  <br><br><br>

<section id="ubio">
  <h2>uBio</h2>
<h3>Search uBio for elephant using ubio_namebank</h3>
<pre><code lang="r">> ubio_namebank(searchName = "elephant", sci = 1, vern = 0)
  namebankID               nameString           fullNameString packageID packageName
1    6938660 Q2VyeWxvbiBlbGVwaGFudA== Q2VyeWxvbiBlbGVwaGFudA==        80 Cerylonidae
  basionymUnit rankID rankName
1      6938660     24  species
> head(ubio_namebank(searchName = "Helianthus annuus", sci = 1, vern = 0)[,-c(2, 3)])
  namebankID packageID packageName basionymUnit rankID   rankName
1    2658020       598   Asterales            0     24    species
2     462478       598   Asterales            0     24    species
3    9073865      5634  Asteraceae            0    444         fo
4    9073864      5634  Asteraceae            0    444         fo
5    8624412      5634  Asteraceae      8722942    444         fo
6    8291505      5634  Asteraceae            0    265 subspecies</code></pre>

<h3>Search for two plant species</h3>
<pre><code lang="r">> out <- lapply(list("Helianthus debilis", "Astragalus aduncus"), function(x) ubio_namebank(searchName = x, sci = 1, vern = 0))
> head(out[[2]][, -c(2, 3)])  # just Astragalus aduncus output
  namebankID packageID packageName basionymUnit rankID rankName
1    2843601       663     Rosales            0     24  species
2    9261962      5780    Fabaceae            0    261       SP
3    9261999      5780    Fabaceae            0    261       SP
4    9261975      5780    Fabaceae            0    261       SP
5     704148       663     Rosales            0     24  species
6    8374424      5780    Fabaceae       722833    444       fo</code></pre>
</section>

  <br><br><br>

<section id="iucn">
  <h2>IUCN Red List</h2>
  <h3>Query the Red List API</h3>
<pre><code lang="r">  
ia <- iucn_summary(c("Panthera uncia", "Lynx lynx"))
</code></pre>

  <h3>Extract Status</h3>
<pre><code lang="r">
> library(plyr)
> laply(ia, function(x) x$status)
[1] "EN" "LC"
</code></pre>
</section>

  <br><br><br>

    <section id="support">

 <h2>Support and Bugs</h2>
  For bugs, feature requests and other issues, please submit an <a href="https://github.com/ropensci/taxize_/issues">issue via Github</a>.
  <br>

  For general comments, email scott at ropensci.gmail.com . This package is part of the rOpenSci suite of R tools. For similar packages visit <a href="http://ropensci.org">ropensci.org</a>
  </section>

  <br><br><br>

      <section id="license">
 <h2>License</h2>
 <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a>.

  </section>
  <br><br><br>
  </div>
  </div>

  </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>

  </body>
</html>
