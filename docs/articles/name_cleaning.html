<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> • taxize</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">taxize</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/taxize">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1></h1>
            
          </div>

    
    
<div class="contents">
<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Strategies for programmatic name cleaning}
%\VignetteEncoding{UTF-8}
-->
<div id="strategies-for-programmatic-name-cleaning" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#strategies-for-programmatic-name-cleaning" class="anchor"> </a></body></html>Strategies for programmatic name cleaning</h1>
<p><code>taxize</code> offers interactive prompts when using <code>get_*()</code> functions (e.g., <code><a href="../reference/get_tsn.html">get_tsn()</a></code>). These prompts make it easy in interactive use to select choices when there are more than one match found.</p>
<p>However, to make your code reproducible you don’t want interactive prompts.</p>
<p>This vignette covers some options for programmatic name cleaning.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"taxize"</span>)</code></pre></div>
<div id="get_-functions" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#get_-functions" class="anchor"> </a></body></html>get_* functions</h2>
<p>When using <code>get_*()</code> functions programatically, you have a few options.</p>
<div id="rows-parameter" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#rows-parameter" class="anchor"> </a></body></html>rows parameter</h3>
<p>Normally, if you get more than one result, you get a prompt asking you to select which taxon you want.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">get_tsn</a></span>(<span class="dt">searchterm =</span> <span class="st">"Quercus b"</span>)
<span class="co">#&gt;       tsn                       target             commonnames    nameusage</span>
<span class="co">#&gt; 1   19298             Quercus beebiana                         not accepted</span>
<span class="co">#&gt; 2  507263       Quercus berberidifolia               scrub oak     accepted</span>
<span class="co">#&gt; 3   19300              Quercus bicolor         swamp white oak     accepted</span>
<span class="co">#&gt; 4   19303             Quercus borealis                         not accepted</span>
<span class="co">#&gt; 5  195131 Quercus borealis var. maxima                         not accepted</span>
<span class="co">#&gt; 6  195166            Quercus boyntonii Boynton's sand post oak     accepted</span>
<span class="co">#&gt; 7  506533              Quercus brantii             Brant's oak     accepted</span>
<span class="co">#&gt; 8  195150            Quercus breviloba                         not accepted</span>
<span class="co">#&gt; 9  195099              Quercus breweri                         not accepted</span>
<span class="co">#&gt; 10 195168             Quercus buckleyi               Texas oak     accepted</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; More than one TSN found for taxon 'Quercus b'!</span>
<span class="co">#&gt;</span>
<span class="co">#&gt;             Enter rownumber of taxon (other inputs will return 'NA'):</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; 1:</span></code></pre></div>
<p>Instead, we can use the rows parameter to specify which records we want by number only (not by a name itself). Here, we want the first 3 records:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">get_tsn</a></span>(<span class="dt">searchterm =</span> <span class="st">'Quercus b'</span>, <span class="dt">rows =</span> <span class="dv">1</span>:<span class="dv">3</span>)
<span class="co">#&gt;     tsn           target     commonnames    nameusage</span>
<span class="co">#&gt; 1 19298 Quercus beebiana                 not accepted</span>
<span class="co">#&gt; 2 19300  Quercus bicolor swamp white oak     accepted</span>
<span class="co">#&gt; 3 19303 Quercus borealis                 not accepted</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; More than one TSN found for taxon 'Quercus b'!</span>
<span class="co">#&gt;</span>
<span class="co">#&gt;             Enter rownumber of taxon (other inputs will return 'NA'):</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; 1:</span></code></pre></div>
<p>However, you still get a prompt as there is more than one result.</p>
<p>Thus, for full programmatic usage, you can specify a single row, if you happen to know which one you want:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">get_tsn</a></span>(<span class="dt">searchterm =</span> <span class="st">'Quercus b'</span>, <span class="dt">rows =</span> <span class="dv">3</span>)
<span class="co">#&gt; [1] "19303"</span>
<span class="co">#&gt; attr(,"match")</span>
<span class="co">#&gt; [1] "found"</span>
<span class="co">#&gt; attr(,"multiple_matches")</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; attr(,"pattern_match")</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; attr(,"uri")</span>
<span class="co">#&gt; [1] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=19303"</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "tsn"</span></code></pre></div>
<p>In reality it is unlikely you’ll know which row you want, unless perhaps you just want one result from each query, regardless of what it is.</p>
</div>
<div id="underscore-methods" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#underscore-methods" class="anchor"> </a></body></html>underscore methods</h3>
<p>A better fit for programmatic use are underscore methods. Each <code>get_*()</code> function has a sister method with and trailing underscore, e.g., <code><a href="../reference/get_tsn.html">get_tsn()</a></code> and <code><a href="../reference/get_tsn.html">get_tsn_()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">get_tsn_</a></span>(<span class="dt">searchterm =</span> <span class="st">"Quercus b"</span>)
<span class="co">#&gt; $`Quercus b`</span>
<span class="co">#&gt;       tsn         scientificname             commonnames nameusage</span>
<span class="co">#&gt; 2   19300        Quercus bicolor         swamp white oak  accepted</span>
<span class="co">#&gt; 7  195166      Quercus boyntonii Boynton's sand post oak  accepted</span>
<span class="co">#&gt; 8  195168       Quercus buckleyi               Texas oak  accepted</span>
<span class="co">#&gt; 9  506533        Quercus brantii             Brant's oak  accepted</span>
<span class="co">#&gt; 10 507263 Quercus berberidifolia               scrub oak  accepted</span></code></pre></div>
<p>The result is a single data.frame for each taxon queried, which can be processed downstream with whatever logic is required in your workflow.</p>
<p>You can also combine <code>rows</code> parameter with underscore functions, as a single number of a range of numbers:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">get_tsn_</a></span>(<span class="dt">searchterm =</span> <span class="st">"Quercus b"</span>, <span class="dt">rows =</span> <span class="dv">1</span>)
<span class="co">#&gt; $`Quercus b`</span>
<span class="co">#&gt;     tsn  scientificname     commonnames nameusage</span>
<span class="co">#&gt; 2 19300 Quercus bicolor swamp white oak  accepted</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">get_tsn_</a></span>(<span class="dt">searchterm =</span> <span class="st">"Quercus b"</span>, <span class="dt">rows =</span> <span class="dv">1</span>:<span class="dv">2</span>)
<span class="co">#&gt; $`Quercus b`</span>
<span class="co">#&gt;      tsn    scientificname             commonnames nameusage</span>
<span class="co">#&gt; 2  19300   Quercus bicolor         swamp white oak  accepted</span>
<span class="co">#&gt; 7 195166 Quercus boyntonii Boynton's sand post oak  accepted</span></code></pre></div>
</div>
</div>
<div id="as--methods" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#as--methods" class="anchor"> </a></body></html>as.* methods</h2>
<p>All <code>get_*()</code> functions have associated <code>as.*()</code> functions (e.g., <code><a href="../reference/get_tsn.html">get_tsn()</a></code> and <code><a href="../reference/get_tsn.html">as.tsn()</a></code>).</p>
<p>Many <code>taxize</code> functions use taxonomic identifier classes (S3 objects) that are the output of <code>get_*()</code> functions. <code>as.*()</code> methods make it easy to make the required S3 taxonomic identifier classes if you already know the identifier. For example:</p>
<p>Already a tsn, returns the same</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">as.tsn</a></span>(<span class="kw"><a href="../reference/get_tsn.html">get_tsn</a></span>(<span class="st">"Quercus douglasii"</span>))
<span class="co">#&gt; [1] "19322"</span>
<span class="co">#&gt; attr(,"match")</span>
<span class="co">#&gt; [1] "found"</span>
<span class="co">#&gt; attr(,"multiple_matches")</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; attr(,"pattern_match")</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; attr(,"uri")</span>
<span class="co">#&gt; [1] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=19322"</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "tsn"</span></code></pre></div>
<p>numeric</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">as.tsn</a></span>(<span class="kw">c</span>(<span class="dv">19322</span>, <span class="dv">129313</span>, <span class="dv">506198</span>))
<span class="co">#&gt; [1] "19322"  "129313" "506198"</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "tsn"</span>
<span class="co">#&gt; attr(,"match")</span>
<span class="co">#&gt; [1] "found" "found" "found"</span>
<span class="co">#&gt; attr(,"multiple_matches")</span>
<span class="co">#&gt; [1] FALSE FALSE FALSE</span>
<span class="co">#&gt; attr(,"pattern_match")</span>
<span class="co">#&gt; [1] FALSE FALSE FALSE</span>
<span class="co">#&gt; attr(,"uri")</span>
<span class="co">#&gt; [1] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=19322" </span>
<span class="co">#&gt; [2] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=129313"</span>
<span class="co">#&gt; [3] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=506198"</span></code></pre></div>
<p>And you can do the same for character, or list inputs - depending on the data source.</p>
<p>The above <code><a href="../reference/get_tsn.html">as.tsn()</a></code> examples have the parameter <code>check = TRUE</code>, meaning we ping the data source web service to make sure the identifier exists. You can skip that check if you like by setting <code>check = FALSE</code>, and the result is returned much faster:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_tsn.html">as.tsn</a></span>(<span class="kw">c</span>(<span class="st">"19322"</span>,<span class="st">"129313"</span>,<span class="st">"506198"</span>), <span class="dt">check =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; [1] "19322"  "129313" "506198"</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "tsn"</span>
<span class="co">#&gt; attr(,"match")</span>
<span class="co">#&gt; [1] "found" "found" "found"</span>
<span class="co">#&gt; attr(,"multiple_matches")</span>
<span class="co">#&gt; [1] FALSE FALSE FALSE</span>
<span class="co">#&gt; attr(,"pattern_match")</span>
<span class="co">#&gt; [1] FALSE FALSE FALSE</span>
<span class="co">#&gt; attr(,"uri")</span>
<span class="co">#&gt; [1] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=19322" </span>
<span class="co">#&gt; [2] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=129313"</span>
<span class="co">#&gt; [3] "http://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&amp;search_value=506198"</span></code></pre></div>
<p>With the output of <code>as.*()</code> methods, you can then proceed with other <code>taxize</code> functions.</p>
</div>
<div id="gnr_resolve" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#gnr_resolve" class="anchor"> </a></body></html>gnr_resolve</h2>
<p>Some functions in <code>taxize</code> are meant specifically for name cleaning. One of those is <code><a href="../reference/gnr_resolve.html">gnr_resolve()</a></code>.</p>
<p><code><a href="../reference/gnr_resolve.html">gnr_resolve()</a></code> doesn’t provide prompts as do <code>get_*()</code> functions, but instead return data.frame’s. So we don’t face the same problem, and can use <code><a href="../reference/gnr_resolve.html">gnr_resolve()</a></code> in a programmatic workflow straight away.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">spp &lt;-<span class="st"> </span><span class="kw"><a href="../reference/names_list.html">names_list</a></span>(<span class="dt">rank =</span> <span class="st">"species"</span>, <span class="dt">size =</span> <span class="dv">10</span>)
<span class="kw"><a href="../reference/gnr_resolve.html">gnr_resolve</a></span>(<span class="dt">names =</span> spp, <span class="dt">preferred_data_sources =</span> <span class="dv">11</span>)
<span class="co">#&gt;         user_supplied_name          submitted_name</span>
<span class="co">#&gt; 1        Shorea beccariana       Shorea beccariana</span>
<span class="co">#&gt; 2           Draba ramulosa          Draba ramulosa</span>
<span class="co">#&gt; 3      Cyrtandra phoenicea     Cyrtandra phoenicea</span>
<span class="co">#&gt; 4      Pulicaria pomeliana     Pulicaria pomeliana</span>
<span class="co">#&gt; 5   Helichrysum gymnocomum  Helichrysum gymnocomum</span>
<span class="co">#&gt; 6         Campium costatum        Campium costatum</span>
<span class="co">#&gt; 7  Pseudosedum condensatum Pseudosedum condensatum</span>
<span class="co">#&gt; 8      Grammitis mollipila     Grammitis mollipila</span>
<span class="co">#&gt; 9      Dioscorea cruzensis     Dioscorea cruzensis</span>
<span class="co">#&gt; 10         Cereus coracare         Cereus coracare</span>
<span class="co">#&gt;                          matched_name      data_source_title score</span>
<span class="co">#&gt; 1             Shorea beccariana Burck GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 2              Draba ramulosa Rollins GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 3     Cyrtandra phoenicea C.B. Clarke GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 4   Pulicaria pomeliana Faure &amp; Maire GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 5          Helichrysum gymnocomum DC. GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 6             Campium costatum Copel. GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 7     Pseudosedum condensatum Boriss. GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 8  Grammitis mollipila (Baker) Copel. GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 9         Dioscorea cruzensis R.Knuth GBIF Backbone Taxonomy 0.988</span>
<span class="co">#&gt; 10                                                             NaN</span></code></pre></div>
</div>
<div id="other-functions" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#other-functions" class="anchor"> </a></body></html>Other functions</h2>
<p>Some other functions in <code>taxize</code> use <code>get_*()</code> functions internally (e.g., <code><a href="../reference/classification.html">classification()</a></code>), but you can can generally pass on parameters to the <code>get_*()</code> functions internally.</p>
</div>
<div id="feedback" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#feedback" class="anchor"> </a></body></html>Feedback?</h2>
<p>Let us know if you have ideas for better ways to do programmatic name cleaning at <a href="https://github.com/ropensci/taxize/issues" class="uri">https://github.com/ropensci/taxize/issues</a> or <a href="https://discuss.ropensci.org/" class="uri">https://discuss.ropensci.org/</a> !</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#strategies-for-programmatic-name-cleaning">Strategies for programmatic name cleaning</a><ul class="nav nav-pills nav-stacked">
<li><a href="#get_-functions">get_* functions</a></li>
      <li><a href="#as.-methods">as.* methods</a></li>
      <li><a href="#gnr_resolve">gnr_resolve</a></li>
      <li><a href="#other-functions">Other functions</a></li>
      <li><a href="#feedback">Feedback?</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Scott Chamberlain, Eduard Szoecs, Zachary Foster.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
